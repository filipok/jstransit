<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
<link rel="stylesheet" href="../../jstransit.css" />
<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
</head>
<body>

<div>
  <h3>Sumar traseu 17/10/2016</h3>
  <div id="file-content"></div>
</div>

<div><canvas id="adjCanvas" width="0" height="180"
style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas></div>

<div style="height: 700px; width: auto; margin: 0;" id="mapid"></div>
<script src="../../jstransit.js"></script>
<script src="../../jstransit_times.js"></script>
<script>
var routeID = 3307287;
var timing ='Lap Description: @Sf. Vineri\n' +
'Lap Time: 00:00:00.0\n' +
'Lap Total Time: 00:50:52.0\n' +
'\n' +
'Lap Description: +Lap 68...\n' +
'Lap Time: 00:00:45.3\n' +
'Lap Total Time: 00:50:34.7\n' +
'\n' +
'Lap Description: *Lap 67...\n' +
'Lap Time: 00:00:36.7\n' +
'Lap Total Time: 00:49:49.3\n' +
'\n' +
'Lap Description: +Lap 66...\n' +
'Lap Time: 00:00:46.3\n' +
'Lap Total Time: 00:49:12.6\n' +
'\n' +
'Lap Description: *Lap 65...\n' +
'Lap Time: 00:00:34.1\n' +
'Lap Total Time: 00:48:26.3\n' +
'\n' +
'Lap Description: +Lap 64...\n' +
'Lap Time: 00:02:04.0\n' +
'Lap Total Time: 00:47:52.2\n' +
'\n' +
'Lap Description: *Lap 63...\n' +
'Lap Time: 00:00:11.3\n' +
'Lap Total Time: 00:45:48.1\n' +
'\n' +
'Lap Description: +Lap 62...\n' +
'Lap Time: 00:00:26.2\n' +
'Lap Total Time: 00:45:36.8\n' +
'\n' +
'Lap Description: @Matei Basarab\n' +
'Lap Time: 00:00:16.6\n' +
'Lap Total Time: 00:45:10.6\n' +
'\n' +
'Lap Description: +Lap 60...\n' +
'Lap Time: 00:01:50.7\n' +
'Lap Total Time: 00:44:53.9\n' +
'\n' +
'Lap Description: @Mircea Vodă\n' +
'Lap Time: 00:00:12.5\n' +
'Lap Total Time: 00:43:03.1\n' +
'\n' +
'Lap Description: +Lap 58...\n' +
'Lap Time: 00:00:35.2\n' +
'Lap Total Time: 00:42:50.6\n' +
'\n' +
'Lap Description: *Lap 57...\n' +
'Lap Time: 00:01:36.2\n' +
'Lap Total Time: 00:42:15.4\n' +
'\n' +
'Lap Description: +Lap 56...\n' +
'Lap Time: 00:00:56.0\n' +
'Lap Total Time: 00:40:39.1\n' +
'\n' +
'Lap Description: @Bc IC Brătianu\n' +
'Lap Time: 00:00:20.8\n' +
'Lap Total Time: 00:39:43.1\n' +
'\n' +
'Lap Description: +Lap 54...\n' +
'Lap Time: 00:00:35.1\n' +
'Lap Total Time: 00:39:22.2\n' +
'\n' +
'Lap Description: +Lap 53...\n' +
'Lap Time: 00:00:55.5\n' +
'Lap Total Time: 00:38:47.1\n' +
'\n' +
'Lap Description: @Piața Unirii\n' +
'Lap Time: 00:00:27.5\n' +
'Lap Total Time: 00:37:51.5\n' +
'\n' +
'Lap Description: +Lap 51...\n' +
'Lap Time: 00:02:01.7\n' +
'Lap Total Time: 00:37:23.9\n' +
'\n' +
'Lap Description: *Lap 50...\n' +
'Lap Time: 00:00:43.8\n' +
'Lap Total Time: 00:35:22.2\n' +
'\n' +
'Lap Description: +Lap 49...\n' +
'Lap Time: 00:00:18.7\n' +
'Lap Total Time: 00:34:38.3\n' +
'\n' +
'Lap Description: @11 Iunie\n' +
'Lap Time: 00:00:14.5\n' +
'Lap Total Time: 00:34:19.6\n' +
'\n' +
'Lap Description: +Lap 47...\n' +
'Lap Time: 00:05:54.7\n' +
'Lap Total Time: 00:34:05.0\n' +
'\n' +
'Lap Description: @Piața R. Maria\n' +
'Lap Time: 00:00:08.2\n' +
'Lap Total Time: 00:28:10.3\n' +
'\n' +
'Lap Description: +Lap 45...\n' +
'Lap Time: 00:01:18.2\n' +
'Lap Total Time: 00:28:02.0\n' +
'\n' +
'Lap Description: @Piața Chirigiu\n' +
'Lap Time: 00:00:07.4\n' +
'Lap Total Time: 00:26:43.7\n' +
'\n' +
'Lap Description: +Lap 43...\n' +
'Lap Time: 00:00:29.3\n' +
'Lap Total Time: 00:26:36.2\n' +
'\n' +
'Lap Description: *Lap 42...\n' +
'Lap Time: 00:00:41.9\n' +
'Lap Total Time: 00:26:06.9\n' +
'\n' +
'Lap Description: +Lap 41...\n' +
'Lap Time: 00:00:18.5\n' +
'Lap Total Time: 00:25:25.0\n' +
'\n' +
'Lap Description: @Șos. Viilor\n' +
'Lap Time: 00:00:06.8\n' +
'Lap Total Time: 00:25:06.4\n' +
'\n' +
'Lap Description: +Lap 39...\n' +
'Lap Time: 00:00:50.7\n' +
'Lap Total Time: 00:24:59.6\n' +
'\n' +
'Lap Description: +Lap 38...\n' +
'Lap Time: 00:00:29.6\n' +
'Lap Total Time: 00:24:08.9\n' +
'\n' +
'Lap Description: *Lap 37...\n' +
'Lap Time: 00:00:50.5\n' +
'Lap Total Time: 00:23:39.2\n' +
'\n' +
'Lap Description: +Lap 36...\n' +
'Lap Time: 00:00:45.2\n' +
'Lap Total Time: 00:22:48.6\n' +
'\n' +
'Lap Description: +Lap 35...\n' +
'Lap Time: 00:00:12.1\n' +
'Lap Total Time: 00:22:03.4\n' +
'\n' +
'Lap Description: *Lap 34...\n' +
'Lap Time: 00:00:11.2\n' +
'Lap Total Time: 00:21:51.2\n' +
'\n' +
'Lap Description: +Lap 33...\n' +
'Lap Time: 00:00:12.7\n' +
'Lap Total Time: 00:21:40.0\n' +
'\n' +
'Lap Description: +Lap 32...\n' +
'Lap Time: 00:00:14.1\n' +
'Lap Total Time: 00:21:27.2\n' +
'\n' +
'Lap Description: +Lap 31...\n' +
'Lap Time: 00:00:18.3\n' +
'Lap Total Time: 00:21:13.1\n' +
'\n' +
'Lap Description: *Lap 30...\n' +
'Lap Time: 00:00:51.4\n' +
'Lap Total Time: 00:20:54.8\n' +
'\n' +
'Lap Description: +Lap 29...\n' +
'Lap Time: 00:01:20.9\n' +
'Lap Total Time: 00:20:03.3\n' +
'\n' +
'Lap Description: @Șos. Progresului\n' +
'Lap Time: 00:00:14.9\n' +
'Lap Total Time: 00:18:42.4\n' +
'\n' +
'Lap Description: +Lap 27...\n' +
'Lap Time: 00:00:36.2\n' +
'Lap Total Time: 00:18:27.4\n' +
'\n' +
'Lap Description: *Lap 26...\n' +
'Lap Time: 00:01:06.4\n' +
'Lap Total Time: 00:17:51.2\n' +
'\n' +
'Lap Description: +Lap 25...\n' +
'Lap Time: 00:00:35.2\n' +
'Lap Total Time: 00:16:44.7\n' +
'\n' +
'Lap Description: *Lap 24...\n' +
'Lap Time: 00:00:46.3\n' +
'Lap Total Time: 00:16:09.4\n' +
'\n' +
'Lap Description: +Lap 23...\n' +
'Lap Time: 00:00:50.1\n' +
'Lap Total Time: 00:15:23.1\n' +
'\n' +
'Lap Description: @Doina\n' +
'Lap Time: 00:00:10.7\n' +
'Lap Total Time: 00:14:32.9\n' +
'\n' +
'Lap Description: +Lap 21...\n' +
'Lap Time: 00:01:02.6\n' +
'Lap Total Time: 00:14:22.2\n' +
'\n' +
'Lap Description: @Calea Ferentari\n' +
'Lap Time: 00:00:17.6\n' +
'Lap Total Time: 00:13:19.5\n' +
'\n' +
'Lap Description: +Lap 19...\n' +
'Lap Time: 00:00:28.9\n' +
'Lap Total Time: 00:13:01.9\n' +
'\n' +
'Lap Description: *Lap 18...\n' +
'Lap Time: 00:00:32.6\n' +
'Lap Total Time: 00:12:33.0\n' +
'\n' +
'Lap Description: +Lap 17...\n' +
'Lap Time: 00:00:26.3\n' +
'Lap Total Time: 00:12:00.3\n' +
'\n' +
'Lap Description: +Lap 16...\n' +
'Lap Time: 00:03:35.9\n' +
'Lap Total Time: 00:11:34.0\n' +
'\n' +
'Lap Description: @Fab. de Pâine\n' +
'Lap Time: 00:00:10.3\n' +
'Lap Total Time: 00:07:58.0\n' +
'\n' +
'Lap Description: +Lap 14...\n' +
'Lap Time: 00:01:07.7\n' +
'Lap Total Time: 00:07:47.7\n' +
'\n' +
'Lap Description: @Pecineaga\n' +
'Lap Time: 00:00:08.0\n' +
'Lap Total Time: 00:06:39.9\n' +
'\n' +
'Lap Description: +Lap 12...\n' +
'Lap Time: 00:00:46.0\n' +
'Lap Total Time: 00:06:31.9\n' +
'\n' +
'Lap Description: @Amurgului\n' +
'Lap Time: 00:00:13.5\n' +
'Lap Total Time: 00:05:45.8\n' +
'\n' +
'Lap Description: +Lap 10...\n' +
'Lap Time: 00:01:00.0\n' +
'Lap Total Time: 00:05:32.3\n' +
'\n' +
'Lap Description: @CC Sălaj\n' +
'Lap Time: 00:00:14.4\n' +
'Lap Total Time: 00:04:32.2\n' +
'\n' +
'Lap Description: +Lap 8...\n' +
'Lap Time: 00:01:09.5\n' +
'Lap Total Time: 00:04:17.8\n' +
'\n' +
'Lap Description: @Bacău\n' +
'Lap Time: 00:00:13.1\n' +
'Lap Total Time: 00:03:08.2\n' +
'\n' +
'Lap Description: +Lap 6...\n' +
'Lap Time: 00:00:30.9\n' +
'Lap Total Time: 00:02:55.0\n' +
'\n' +
'Lap Description: @Șos. Sălaj\n' +
'Lap Time: 00:00:10.3\n' +
'Lap Total Time: 00:02:24.1\n' +
'\n' +
'Lap Description: +Lap 4...\n' +
'Lap Time: 00:01:10.1\n' +
'Lap Total Time: 00:02:13.7\n' +
'\n' +
'Lap Description: @Piața Pucheni\n' +
'Lap Time: 00:00:13.1\n' +
'Lap Total Time: 00:01:03.6\n' +
'\n' +
'Lap Description: +Lap 2...\n' +
'Lap Time: 00:00:42.6\n' +
'Lap Total Time: 00:00:50.4\n' +
'\n' +
'Lap Description: @CUR\n' +
'Lap Time: 00:00:07.8\n' +
'Lap Total Time: 00:00:07.8\n' +
'';
var overpass1 = 'http://overpass-api.de/api/interpreter?data=relation(';
var overpass2 =');out body;>;out body;';
var overpass_full = overpass1 + routeID + overpass2;
var myMap = baseMap(L);
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
        var xmlDoc = this.responseXML;
        var relation = xmlDoc.getElementsByTagName("relation")[0];
        var mapObjects = addTimedRelation(timing, relation, xmlDoc);
        var linesLayer = new L.featureGroup(mapObjects[0]).addTo(myMap);
        var platformsLayer = new L.featureGroup(mapObjects[1]).addTo(myMap);
        myMap.fitBounds(platformsLayer.getBounds());
    }
};
xhttp.open("GET", overpass_full, true);
xhttp.send();
</script>

</body>
</html>
