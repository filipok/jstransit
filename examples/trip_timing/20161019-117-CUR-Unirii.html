<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
<link rel="stylesheet" href="../../jstransit.css" />
<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
</head>
<body>

<div>
  <h3>Sumar traseu 19/10/2016</h3>
  <div id="file-content"></div>
</div>

<div><canvas id="adjCanvas" width="0" height="180"
style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas></div>

<div style="height: 700px; width: auto; margin: 0;" id="mapid"></div>
<script src="../../jstransit.js"></script>
<script src="../../jstransit_times.js"></script>
<script>
var routeID = 3307287;
var timing ='Lap Description: @Sf. Vineri\n' +
'Lap Time: 00:00:0.0\n' +
'Lap Total Time: 00:52:06.1\n' +
'\n' +
'Lap Description: +Lap 70...\n' +
'Lap Time: 00:00:24.6\n' +
'Lap Total Time: 00:51:46.1\n' +
'\n' +
'Lap Description: *Lap 69...\n' +
'Lap Time: 00:00:21.7\n' +
'Lap Total Time: 00:51:21.5\n' +
'\n' +
'Lap Description: +Lap 68...\n' +
'Lap Time: 00:02:42.7\n' +
'Lap Total Time: 00:50:59.7\n' +
'\n' +
'Lap Description: @Matei Basarab\n' +
'Lap Time: 00:00:14.8\n' +
'Lap Total Time: 00:48:16.9\n' +
'\n' +
'Lap Description: +Lap 66...\n' +
'Lap Time: 00:00:32.1\n' +
'Lap Total Time: 00:48:02.1\n' +
'\n' +
'Lap Description: *Lap 65...\n' +
'Lap Time: 00:00:13.0\n' +
'Lap Total Time: 00:47:29.9\n' +
'\n' +
'Lap Description: +Lap 64...\n' +
'Lap Time: 00:00:41.7\n' +
'Lap Total Time: 00:47:16.9\n' +
'\n' +
'Lap Description: @Mircea Vodă\n' +
'Lap Time: 00:00:09.3\n' +
'Lap Total Time: 00:46:35.1\n' +
'\n' +
'Lap Description: +Lap 62...\n' +
'Lap Time: 00:01:19.9\n' +
'Lap Total Time: 00:46:25.7\n' +
'\n' +
'Lap Description: @Bd IC Brătianu\n' +
'Lap Time: 00:00:19.7\n' +
'Lap Total Time: 00:45:05.8\n' +
'\n' +
'Lap Description: +Lap 60...\n' +
'Lap Time: 00:00:40.3\n' +
'Lap Total Time: 00:44:46.1\n' +
'\n' +
'Lap Description: *Lap 59...\n' +
'Lap Time: 00:00:42.3\n' +
'Lap Total Time: 00:44:05.7\n' +
'\n' +
'Lap Description: +Lap 58...\n' +
'Lap Time: 00:00:32.4\n' +
'Lap Total Time: 00:43:23.3\n' +
'\n' +
'Lap Description: *Lap 57...\n' +
'Lap Time: 00:00:14.3\n' +
'Lap Total Time: 00:42:50.9\n' +
'\n' +
'Lap Description: +Lap 56...\n' +
'Lap Time: 00:00:58.3\n' +
'Lap Total Time: 00:42:36.5\n' +
'\n' +
'Lap Description: @Piața Unirii\n' +
'Lap Time: 00:00:28.0\n' +
'Lap Total Time: 00:41:38.2\n' +
'\n' +
'Lap Description: +Lap 54...\n' +
'Lap Time: 00:02:23.0\n' +
'Lap Total Time: 00:41:10.2\n' +
'\n' +
'Lap Description: *Lap 53...\n' +
'Lap Time: 00:00:31.1\n' +
'Lap Total Time: 00:38:47.2\n' +
'\n' +
'Lap Description: +Lap 52...\n' +
'Lap Time: 00:00:13.5\n' +
'Lap Total Time: 00:38:16.0\n' +
'\n' +
'Lap Description: @11 Iunie\n' +
'Lap Time: 00:00:12.5\n' +
'Lap Total Time: 00:38:02.5\n' +
'\n' +
'Lap Description: +Lap 50...\n' +
'Lap Time: 00:02:25.8\n' +
'Lap Total Time: 00:37:49.9\n' +
'\n' +
'Lap Description: @Piața R. Maria\n' +
'Lap Time: 00:00:07.2\n' +
'Lap Total Time: 00:35:24.1\n' +
'\n' +
'Lap Description: +Lap 48...\n' +
'Lap Time: 00:00:19.9\n' +
'Lap Total Time: 00:35:16.8\n' +
'\n' +
'Lap Description: *Lap 47...\n' +
'Lap Time: 00:00:26.0\n' +
'Lap Total Time: 00:34:56.9\n' +
'\n' +
'Lap Description: +Lap 46...\n' +
'Lap Time: 00:01:05.6\n' +
'Lap Total Time: 00:34:30.8\n' +
'\n' +
'Lap Description: @Piața Chirigiu\n' +
'Lap Time: 00:00:07.2\n' +
'Lap Total Time: 00:33:25.1\n' +
'\n' +
'Lap Description: +Lap 44...\n' +
'Lap Time: 00:00:45.9\n' +
'Lap Total Time: 00:33:17.9\n' +
'\n' +
'Lap Description: *Lap 43...\n' +
'Lap Time: 00:00:21.6\n' +
'Lap Total Time: 00:32:31.9\n' +
'\n' +
'Lap Description: +Lap 42...\n' +
'Lap Time: 00:00:17.6\n' +
'Lap Total Time: 00:32:10.3\n' +
'\n' +
'Lap Description: @Șos. Viilor\n' +
'Lap Time: 00:00:08.5\n' +
'Lap Total Time: 00:31:52.7\n' +
'\n' +
'Lap Description: +Lap 40...\n' +
'Lap Time: 00:01:10.2\n' +
'Lap Total Time: 00:31:44.1\n' +
'\n' +
'Lap Description: *Lap 39...\n' +
'Lap Time: 00:01:08.6\n' +
'Lap Total Time: 00:30:33.8\n' +
'\n' +
'Lap Description: +Lap 38...\n' +
'Lap Time: 00:00:23.8\n' +
'Lap Total Time: 00:29:25.2\n' +
'\n' +
'Lap Description: *Lap 37...\n' +
'Lap Time: 00:00:48.6\n' +
'Lap Total Time: 00:29:01.4\n' +
'\n' +
'Lap Description: +Lap 36...\n' +
'Lap Time: 00:00:47.3\n' +
'Lap Total Time: 00:28:12.7\n' +
'\n' +
'Lap Description: *Lap 35...\n' +
'Lap Time: 00:00:30.3\n' +
'Lap Total Time: 00:27:25.4\n' +
'\n' +
'Lap Description: +Lap 34...\n' +
'Lap Time: 00:00:52.9\n' +
'Lap Total Time: 00:26:55.0\n' +
'\n' +
'Lap Description: *Lap 33...\n' +
'Lap Time: 00:00:34.4\n' +
'Lap Total Time: 00:26:02.1\n' +
'\n' +
'Lap Description: +Lap 32...\n' +
'Lap Time: 00:02:37.1\n' +
'Lap Total Time: 00:25:27.6\n' +
'\n' +
'Lap Description: @Șos. Progresului\n' +
'Lap Time: 00:00:12.5\n' +
'Lap Total Time: 00:22:50.4\n' +
'\n' +
'Lap Description: +Lap 30...\n' +
'Lap Time: 00:00:49.4\n' +
'Lap Total Time: 00:22:37.8\n' +
'\n' +
'Lap Description: *Lap 29...\n' +
'Lap Time: 00:00:55.3\n' +
'Lap Total Time: 00:21:48.4\n' +
'\n' +
'Lap Description: +Lap 28...\n' +
'Lap Time: 00:00:45.9\n' +
'Lap Total Time: 00:20:53.1\n' +
'\n' +
'Lap Description: *Lap 27...\n' +
'Lap Time: 00:00:39.0\n' +
'Lap Total Time: 00:20:07.1\n' +
'\n' +
'Lap Description: +Lap 26...\n' +
'Lap Time: 00:01:05.4\n' +
'Lap Total Time: 00:19:28.1\n' +
'\n' +
'Lap Description: @Doina\n' +
'Lap Time: 00:00:12.9\n' +
'Lap Total Time: 00:18:22.6\n' +
'\n' +
'Lap Description: +Lap 24...\n' +
'Lap Time: 00:01:57.4\n' +
'Lap Total Time: 00:18:09.6\n' +
'\n' +
'Lap Description: @Calea Ferentari\n' +
'Lap Time: 00:00:16.2\n' +
'Lap Total Time: 00:16:12.2\n' +
'\n' +
'Lap Description: +Lap 22...\n' +
'Lap Time: 00:00:32.0\n' +
'Lap Total Time: 00:15:55.9\n' +
'\n' +
'Lap Description: *Lap 21...\n' +
'Lap Time: 00:00:40.4\n' +
'Lap Total Time: 00:15:23.9\n' +
'\n' +
'Lap Description: +Lap 20...\n' +
'Lap Time: 00:00:29.5\n' +
'Lap Total Time: 00:14:43.4\n' +
'\n' +
'Lap Description: *Lap 19...\n' +
'Lap Time: 00:00:16.8\n' +
'Lap Total Time: 00:14:13.8\n' +
'\n' +
'Lap Description: +Lap 18...\n' +
'Lap Time: 00:03:31.0\n' +
'Lap Total Time: 00:13:57.0\n' +
'\n' +
'Lap Description: @Fab. de Pâine\n' +
'Lap Time: 00:00:07.8\n' +
'Lap Total Time: 00:10:26.0\n' +
'\n' +
'Lap Description: +Lap 16...\n' +
'Lap Time: 00:01:21.4\n' +
'Lap Total Time: 00:10:18.1\n' +
'\n' +
'Lap Description: @Pecineaga\n' +
'Lap Time: 00:00:11.0\n' +
'Lap Total Time: 00:08:56.6\n' +
'\n' +
'Lap Description: +Lap 14...\n' +
'Lap Time: 00:01:43.9\n' +
'Lap Total Time: 00:08:45.6\n' +
'\n' +
'Lap Description: @Amurgului\n' +
'Lap Time: 00:00:18.9\n' +
'Lap Total Time: 00:07:01.7\n' +
'\n' +
'Lap Description: +Lap 12...\n' +
'Lap Time: 00:00:26.6\n' +
'Lap Total Time: 00:06:42.7\n' +
'\n' +
'Lap Description: +Lap 11...\n' +
'Lap Time: 00:00:58.5\n' +
'Lap Total Time: 00:06:16.0\n' +
'\n' +
'Lap Description: @CC Sălaj\n' +
'Lap Time: 00:00:23.0\n' +
'Lap Total Time: 00:05:17.5\n' +
'\n' +
'Lap Description: +Lap 9...\n' +
'Lap Time: 00:01:14.1\n' +
'Lap Total Time: 00:04:54.4\n' +
'\n' +
'Lap Description: @Bacău\n' +
'Lap Time: 00:00:20.1\n' +
'Lap Total Time: 00:03:40.3\n' +
'\n' +
'Lap Description: +Lap 7...\n' +
'Lap Time: 00:00:37.1\n' +
'Lap Total Time: 00:03:20.1\n' +
'\n' +
'Lap Description: @Șos. Sălaj\n' +
'Lap Time: 00:00:10.8\n' +
'Lap Total Time: 00:02:43.0\n' +
'\n' +
'Lap Description: +Lap 5...\n' +
'Lap Time: 00:01:04.1\n' +
'Lap Total Time: 00:02:32.2\n' +
'\n' +
'Lap Description: @Piața Pucheni\n' +
'Lap Time: 00:00:12.0\n' +
'Lap Total Time: 00:01:28.0\n' +
'\n' +
'Lap Description: +Lap 3...\n' +
'Lap Time: 00:00:55.8\n' +
'Lap Total Time: 00:01:16.0\n' +
'\n' +
'Lap Description: @CUR\n' +
'Lap Time: 00:00:20.2\n' +
'Lap Total Time: 00:00:20.2\n' +
'';
var overpass1 = 'http://overpass-api.de/api/interpreter?data=relation(';
var overpass2 =');out body;>;out body;';
var overpass_full = overpass1 + routeID + overpass2;
var myMap = baseMap(L);
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
        var xmlDoc = this.responseXML;
        var relation = xmlDoc.getElementsByTagName("relation")[0];
        var mapObjects = addTimedRelation(timing, relation, xmlDoc);
        var linesLayer = new L.featureGroup(mapObjects[0]).addTo(myMap);
        var platformsLayer = new L.featureGroup(mapObjects[1]).addTo(myMap);
        myMap.fitBounds(platformsLayer.getBounds());
    }
};
xhttp.open("GET", overpass_full, true);
xhttp.send();
</script>

</body>
</html>
