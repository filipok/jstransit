<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
<link rel="stylesheet" href="../../jstransit.css" />
<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
</head>
<body>

<div>
  <h3>Sumar traseu 18/10/2016</h3>
  <div id="file-content"></div>
</div>

<div><canvas id="adjCanvas" width="0" height="180"
style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas></div>

<div style="height: 700px; width: auto; margin: 0;" id="mapid"></div>
<script src="../../jstransit.js"></script>
<script src="../../jstransit_times.js"></script>
<script>
var routeID = 3307287;
var timing ='Lap Description: @Sf. Vineri\n' +
'Lap Time: 00:00:00.0\n' +
'Lap Total Time: 00:52:15.7\n' +
'\n' +
'Lap Description: +Lap 67...\n' +
'Lap Time: 00:00:39.3\n' +
'Lap Total Time: 00:51:39.7\n' +
'\n' +
'Lap Description: *Lap 66...\n' +
'Lap Time: 00:00:14.8\n' +
'Lap Total Time: 00:51:00.4\n' +
'\n' +
'Lap Description: +Lap 65...\n' +
'Lap Time: 00:01:33.3\n' +
'Lap Total Time: 00:50:45.5\n' +
'\n' +
'Lap Description: *Lap 64...\n' +
'Lap Time: 00:00:15.4\n' +
'Lap Total Time: 00:49:12.2\n' +
'\n' +
'Lap Description: +Lap 63...\n' +
'Lap Time: 00:01:36.3\n' +
'Lap Total Time: 00:48:56.7\n' +
'\n' +
'Lap Description: *Lap 62...\n' +
'Lap Time: 00:00:31.0\n' +
'Lap Total Time: 00:47:20.4\n' +
'\n' +
'Lap Description: +Lap 61...\n' +
'Lap Time: 00:00:24.3\n' +
'Lap Total Time: 00:46:49.3\n' +
'\n' +
'Lap Description: @Matei Basarab\n' +
'Lap Time: 00:00:12.3\n' +
'Lap Total Time: 00:46:24.9\n' +
'\n' +
'Lap Description: +Lap 59...\n' +
'Lap Time: 00:00:29.4\n' +
'Lap Total Time: 00:46:12.5\n' +
'\n' +
'Lap Description: *Lap 58...\n' +
'Lap Time: 00:00:08.4\n' +
'Lap Total Time: 00:45:43.0\n' +
'\n' +
'Lap Description: +Lap 57...\n' +
'Lap Time: 00:00:51.0\n' +
'Lap Total Time: 00:45:34.6\n' +
'\n' +
'Lap Description: @Mircea Vodă\n' +
'Lap Time: 00:00:21.6\n' +
'Lap Total Time: 00:44:43.6\n' +
'\n' +
'Lap Description: +Lap 55...\n' +
'Lap Time: 00:01:35.0\n' +
'Lap Total Time: 00:44:22.0\n' +
'\n' +
'Lap Description: @Bd IC Brătianu\n' +
'Lap Time: 00:00:19.1\n' +
'Lap Total Time: 00:42:47.0\n' +
'\n' +
'Lap Description: +Lap 53...\n' +
'Lap Time: 00:00:45.8\n' +
'Lap Total Time: 00:42:27.8\n' +
'\n' +
'Lap Description: *Lap 52...\n' +
'Lap Time: 00:00:39.8\n' +
'Lap Total Time: 00:41:42.0\n' +
'\n' +
'Lap Description: +Lap 51...\n' +
'Lap Time: 00:00:23.7\n' +
'Lap Total Time: 00:41:02.1\n' +
'\n' +
'Lap Description: *Lap 50...\n' +
'Lap Time: 00:01:22.4\n' +
'Lap Total Time: 00:40:38.4\n' +
'\n' +
'Lap Description: +Lap 49...\n' +
'Lap Time: 00:00:46.1\n' +
'Lap Total Time: 00:39:16.0\n' +
'\n' +
'Lap Description: *Lap 48...\n' +
'Lap Time: 00:00:50.2\n' +
'Lap Total Time: 00:38:29.9\n' +
'\n' +
'Lap Description: +Lap 47...\n' +
'Lap Time: 00:00:46.2\n' +
'Lap Total Time: 00:37:39.6\n' +
'\n' +
'Lap Description: @Piața Unirii\n' +
'Lap Time: 00:00:28.6\n' +
'Lap Total Time: 00:36:53.3\n' +
'\n' +
'Lap Description: +Lap 45...\n' +
'Lap Time: 00:02:36.7\n' +
'Lap Total Time: 00:36:24.7\n' +
'\n' +
'Lap Description: *Lap 44...\n' +
'Lap Time: 00:00:17.7\n' +
'Lap Total Time: 00:33:48.0\n' +
'\n' +
'Lap Description: +Lap 43...\n' +
'Lap Time: 00:00:15.7\n' +
'Lap Total Time: 00:33:30.2\n' +
'\n' +
'Lap Description: @11 Iunie\n' +
'Lap Time: 00:00:11.5\n' +
'Lap Total Time: 00:33:14.5\n' +
'\n' +
'Lap Description: +Lap 41...\n' +
'Lap Time: 00:02:48.5\n' +
'Lap Total Time: 00:33:02.9\n' +
'\n' +
'Lap Description: @Piața R. Maria\n' +
'Lap Time: 00:00:09.4\n' +
'Lap Total Time: 00:30:14.3\n' +
'\n' +
'Lap Description: +Lap 39...\n' +
'Lap Time: 00:01:31.5\n' +
'Lap Total Time: 00:30:04.8\n' +
'\n' +
'Lap Description: @Piața Chirigiu\n' +
'Lap Time: 00:00:12.8\n' +
'Lap Total Time: 00:28:33.3\n' +
'\n' +
'Lap Description: +Lap 37...\n' +
'Lap Time: 00:00:30.5\n' +
'Lap Total Time: 00:28:20.5\n' +
'\n' +
'Lap Description: *Lap 36...a incep mai dev\n' +
'Lap Time: 00:00:13.0\n' +
'Lap Total Time: 00:27:49.9\n' +
'\n' +
'Lap Description: +Lap 35...\n' +
'Lap Time: 00:01:22.0\n' +
'Lap Total Time: 00:27:36.9\n' +
'\n' +
'Lap Description: @Șos. Viilor\n' +
'Lap Time: 00:00:17.6\n' +
'Lap Total Time: 00:26:14.9\n' +
'\n' +
'Lap Description: +Lap 33...\n' +
'Lap Time: 00:00:20.7\n' +
'Lap Total Time: 00:25:57.2\n' +
'\n' +
'Lap Description: *Lap 32...\n' +
'Lap Time: 00:01:06.7\n' +
'Lap Total Time: 00:25:36.5\n' +
'\n' +
'Lap Description: +Lap 31...\n' +
'Lap Time: 00:00:45.6\n' +
'Lap Total Time: 00:24:29.8\n' +
'\n' +
'Lap Description: *Lap 30...\n' +
'Lap Time: 00:00:15.0\n' +
'Lap Total Time: 00:23:44.2\n' +
'\n' +
'Lap Description: +Lap 29...\n' +
'Lap Time: 00:02:17.3\n' +
'Lap Total Time: 00:23:29.1\n' +
'\n' +
'Lap Description: @Șos. Progresului\n' +
'Lap Time: 00:00:31.4\n' +
'Lap Total Time: 00:21:11.8\n' +
'\n' +
'Lap Description: +Lap 27...\n' +
'Lap Time: 00:00:49.2\n' +
'Lap Total Time: 00:20:40.4\n' +
'\n' +
'Lap Description: *Lap 26...\n' +
'Lap Time: 00:00:56.9\n' +
'Lap Total Time: 00:19:51.1\n' +
'\n' +
'Lap Description: +Lap 25...\n' +
'Lap Time: 00:00:41.8\n' +
'Lap Total Time: 00:18:54.2\n' +
'\n' +
'Lap Description: *Lap 24...\n' +
'Lap Time: 00:00:40.7\n' +
'Lap Total Time: 00:18:12.4\n' +
'\n' +
'Lap Description: +Lap 23...\n' +
'Lap Time: 00:01:22.2\n' +
'Lap Total Time: 00:17:31.6\n' +
'\n' +
'Lap Description: @Doina\n' +
'Lap Time: 00:00:12.9\n' +
'Lap Total Time: 00:16:09.4\n' +
'\n' +
'Lap Description: +Lap 21...\n' +
'Lap Time: 00:00:57.6\n' +
'Lap Total Time: 00:15:56.4\n' +
'\n' +
'Lap Description: @Calea Ferentari\n' +
'Lap Time: 00:00:24.1\n' +
'Lap Total Time: 00:14:58.8\n' +
'\n' +
'Lap Description: +Lap 19...\n' +
'Lap Time: 00:00:34.0\n' +
'Lap Total Time: 00:14:34.7\n' +
'\n' +
'Lap Description: *Lap 18...\n' +
'Lap Time: 00:00:24.0\n' +
'Lap Total Time: 00:14:00.7\n' +
'\n' +
'Lap Description: +Lap 17...\n' +
'Lap Time: 00:03:59.6\n' +
'Lap Total Time: 00:13:36.6\n' +
'\n' +
'Lap Description: @Fab. de Pâine\n' +
'Lap Time: 00:00:10.2\n' +
'Lap Total Time: 00:09:37.0\n' +
'\n' +
'Lap Description: +Lap 15...\n' +
'Lap Time: 00:01:35.8\n' +
'Lap Total Time: 00:09:26.7\n' +
'\n' +
'Lap Description: @Pecineaga\n' +
'Lap Time: 00:00:20.5\n' +
'Lap Total Time: 00:07:50.9\n' +
'\n' +
'Lap Description: +Lap 13...\n' +
'Lap Time: 00:01:20.1\n' +
'Lap Total Time: 00:07:30.3\n' +
'\n' +
'Lap Description: @Amurgului\n' +
'Lap Time: 00:00:19.1\n' +
'Lap Total Time: 00:06:10.2\n' +
'\n' +
'Lap Description: +Lap 11...\n' +
'Lap Time: 00:00:56.6\n' +
'Lap Total Time: 00:05:51.0\n' +
'\n' +
'Lap Description: @CC Sălaj\n' +
'Lap Time: 00:00:11.3\n' +
'Lap Total Time: 00:04:54.4\n' +
'\n' +
'Lap Description: +Lap 9...\n' +
'Lap Time: 00:01:15.5\n' +
'Lap Total Time: 00:04:43.1\n' +
'\n' +
'Lap Description: @Bacău\n' +
'Lap Time: 00:00:13.3\n' +
'Lap Total Time: 00:03:27.6\n' +
'\n' +
'Lap Description: +Lap 7...\n' +
'Lap Time: 00:00:31.6\n' +
'Lap Total Time: 00:03:14.2\n' +
'\n' +
'Lap Description: @Șos. Sălaj\n' +
'Lap Time: 00:00:13.6\n' +
'Lap Total Time: 00:02:42.6\n' +
'\n' +
'Lap Description: +Lap 5...\n' +
'Lap Time: 00:01:05.9\n' +
'Lap Total Time: 00:02:28.9\n' +
'\n' +
'Lap Description: @Piața Pucheni\n' +
'Lap Time: 00:00:10.0\n' +
'Lap Total Time: 00:01:22.9\n' +
'\n' +
'Lap Description: +Lap 3...\n' +
'Lap Time: 00:00:53.5\n' +
'Lap Total Time: 00:01:12.9\n' +
'\n' +
'Lap Description: @CUR\n' +
'Lap Time: 00:00:19.4\n' +
'Lap Total Time: 00:00:19.4\n' +
'';
var overpass1 = 'http://overpass-api.de/api/interpreter?data=relation(';
var overpass2 =');out body;>;out body;';
var overpass_full = overpass1 + routeID + overpass2;
var myMap = baseMap(L);
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
        var xmlDoc = this.responseXML;
        var relation = xmlDoc.getElementsByTagName("relation")[0];
        var mapObjects = addTimedRelation(timing, relation, xmlDoc);
        var linesLayer = new L.featureGroup(mapObjects[0]).addTo(myMap);
        var platformsLayer = new L.featureGroup(mapObjects[1]).addTo(myMap);
        myMap.fitBounds(platformsLayer.getBounds());
    }
};
xhttp.open("GET", overpass_full, true);
xhttp.send();
</script>

</body>
</html>
